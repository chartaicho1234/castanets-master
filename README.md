# 🥁 カスタネットマスター

**BPM 180の高精度リズムトレーニングアプリ**

[![Deploy to GitHub Pages](https://github.com/chartaicho1234/castanets-master/actions/workflows/deploy.yml/badge.svg)](https://github.com/chartaicho1234/castanets-master/actions/workflows/deploy.yml)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

## 🎯 概要

カスタネットマスターは、BPM 180固定で4分音符、8分音符、16分音符の正確なリズムをマスターするためのプロ仕様トレーニングアプリです。ミリ秒単位の高精度判定と詳細な分析機能で、あなたのリズム感を極限まで鍛え上げます。

### 🌟 特徴
- **プロレベルの精度**: ±25ms以内のパーフェクト判定
- **科学的アプローチ**: 統計分析による客観的な上達度測定
- **完全無料**: 広告なし、課金なし
- **クロスプラットフォーム**: Web、iOS、Android対応

## ✨ 主な機能

### 🎵 3段階の難易度システム

| レベル | 音符 | 間隔 | 判定基準 | 説明 |
|--------|------|------|----------|------|
| **初級** | 4分音符 | 333.33ms | ±25ms | リズムの基礎を固める |
| **中級** | 8分音符 | 166.67ms | ±13.75ms | 倍速の正確性を習得 |
| **上級** | 16分音符 | 83.33ms | ±7.5ms | 超高速の究極チャレンジ |

### 🎯 高精度判定システム
- **パーフェクト**: 各レベルの最適化された許容範囲内 (100ポイント)
- **グッド**: パーフェクトの2倍の許容範囲内 (50ポイント)
- **早すぎ/遅すぎ**: 正確な偏差値表示でフィードバック

### ⚙️ 高度なキャリブレーション機能
- **自動遅延検出**: デバイス・オーディオ遅延を8回のタップで精密測定
- **環境適応**: 異なるデバイスでも一貫した判定精度
- **リアルタイム補正**: ゲーム中の自動タイミング調整

### 📊 プロ仕様の分析機能
- **完全タイムライン表示**: 0秒からの全拍可視化
- **セグメント別分析**: 2小節単位のパフォーマンス比較
- **統計情報**: 平均偏差、標準偏差、安定性評価
- **改善アドバイス**: AI分析による具体的な上達指導

### 🎮 ゲームモード
- **準備期間**: 各レベルに応じた心の準備時間
- **カウントダウン**: 視覚・聴覚でのリズム確認
- **本番演奏**: 休符を含む実戦的なリズムパターン
- **結果分析**: 詳細なパフォーマンスレポート

## 🚀 技術スタック

### フロントエンド
- **React Native** - クロスプラットフォーム開発
- **TypeScript** - 型安全性とコード品質
- **Expo Router** - モダンなナビゲーション
- **React Native Reanimated** - 60fps高性能アニメーション

### オーディオ・タイミング
- **Expo AV** - 高精度オーディオ処理
- **Performance API** - ミリ秒精度のタイミング測定
- **Web Audio API** - ブラウザでの最適化された音声生成

### 開発・デプロイ
- **Expo** - 統合開発環境
- **GitHub Actions** - 自動デプロイメント
- **GitHub Pages** - 静的サイトホスティング

## 📱 対応プラットフォーム

- **🌐 Web**: [https://chartaicho1234.github.io/castanets-master/](https://chartaicho1234.github.io/castanets-master/)
- **📱 iOS**: iPhone/iPad (Expo Go経由)
- **🤖 Android**: スマートフォン/タブレット (Expo Go経由)

## 🛠️ 開発・実行方法

### 前提条件
```bash
Node.js 18以上
npm または yarn
```

### クイックスタート
```bash
# リポジトリをクローン
git clone https://github.com/chartaicho1234/castanets-master.git
cd castanets-master

# 依存関係をインストール
npm install

# 開発サーバーを起動
npm run dev
```

### 実行方法
- **Web**: ブラウザで `http://localhost:8081` にアクセス
- **モバイル**: Expo Go アプリでQRコードをスキャン

### ビルド
```bash
# Web用ビルド
npm run build:web

# 本番デプロイ（GitHub Pages）
git push origin main  # 自動デプロイ実行
```

## 🎮 使い方ガイド

### 🚀 初回セットアップ
1. **キャリブレーション実行**: 「タイミング補正」→「キャリブレート」
2. **8回正確にタップ**: メトロノーム音に合わせて
3. **補正値確認**: 自動計算された遅延補正値をチェック

### 📈 トレーニングの流れ
1. **レベル選択**: 4分音符から開始を推奨
2. **メトロノーム練習**: ♪ボタンで基本リズム習得
3. **ゲーム開始**: 再生ボタンで本格トレーニング
4. **結果分析**: 詳細レポートで弱点把握
5. **段階的レベルアップ**: 精度向上後に次のレベルへ

### 🎯 操作方法
| ボタン | 機能 | 説明 |
|--------|------|------|
| **♪** | メトロノーム練習 | リズム感覚の基礎練習 |
| **▶️** | ゲーム開始 | 本格的なトレーニング開始 |
| **🔄** | リセット | ゲーム状態をリセット |
| **📊** | レベル変更 | 難易度切り替え |
| **⚙️** | キャリブレート | タイミング補正実行 |

## 📈 上達のための戦略

### 🎯 基本戦略
1. **必須**: 毎回キャリブレーション実行
2. **段階的**: 4分音符 → 8分音符 → 16分音符
3. **基礎重視**: メトロノーム練習で土台作り
4. **分析活用**: 統計データで客観的改善
5. **継続性**: 短時間でも毎日練習

### 🧠 メンタルアプローチ
- **集中力**: 一定のリズムを保つことを最優先
- **忍耐力**: 16分音符は超高難度、焦らず段階的に
- **分析力**: 数値データを活用した科学的上達
- **休息**: 疲労時は無理せず適度な休憩

### 📊 目標設定
| レベル | 初心者目標 | 中級者目標 | 上級者目標 |
|--------|------------|------------|------------|
| **4分音符** | 精度60% | 精度80% | 精度95% |
| **8分音符** | 精度40% | 精度70% | 精度90% |
| **16分音符** | 精度20% | 精度50% | 精度80% |

## 🔧 トラブルシューティング

### 🎵 音声関連
| 問題 | 原因 | 解決方法 |
|------|------|----------|
| 音が聞こえない | デバイス設定 | 音量・ミュート設定確認 |
| 音が途切れる | ブラウザ制限 | ページをリロード |
| 音質が悪い | 古いブラウザ | 最新ブラウザに更新 |

### ⏱️ タイミング関連
| 問題 | 原因 | 解決方法 |
|------|------|----------|
| 判定がずれる | 未キャリブレーション | キャリブレーション再実行 |
| 「遅すぎ」が多い | 補正値エラー | キャリブレーション値確認 |
| 不安定な判定 | デバイス性能 | 他アプリ終了・再起動 |

### 💻 パフォーマンス関連
| 問題 | 原因 | 解決方法 |
|------|------|----------|
| 動作が重い | メモリ不足 | 他アプリ終了 |
| フリーズする | ブラウザ問題 | ページリロード |
| 反応が遅い | 古いデバイス | 軽量ブラウザ使用 |

## 📊 技術仕様

### 🎵 オーディオ仕様
- **サンプリングレート**: 44.1kHz
- **ビット深度**: 16bit
- **レイテンシ**: <10ms (最適化済み)
- **周波数**: 400-1000Hz (可聴域最適化)

### ⏱️ タイミング仕様
- **測定精度**: 1ms
- **判定精度**: ±1ms
- **キャリブレーション精度**: ±0.5ms
- **フレームレート**: 60fps

### 📱 システム要件
- **Web**: Chrome 80+, Firefox 75+, Safari 13+
- **iOS**: iOS 13.0+
- **Android**: Android 8.0+ (API 26+)
- **RAM**: 最低2GB推奨

## 🤝 コントリビューション

### 🛠️ 開発参加
```bash
# フォーク後、ブランチ作成
git checkout -b feature/amazing-feature

# 変更をコミット
git commit -m 'Add amazing feature'

# プッシュ
git push origin feature/amazing-feature

# プルリクエスト作成
```

### 🐛 バグ報告
[GitHub Issues](https://github.com/chartaicho1234/castanets-master/issues) で以下の情報と共に報告：
- デバイス・OS情報
- ブラウザ情報
- 再現手順
- 期待される動作
- 実際の動作

### 💡 機能提案
新機能のアイデアや改善提案も Issues でお待ちしています！

## 📄 ライセンス

MIT License - 詳細は [LICENSE](LICENSE) ファイルを参照

## 🙏 謝辞

- **React Native Team** - 素晴らしいフレームワーク
- **Expo Team** - 開発体験の向上
- **音楽教育者の皆様** - リズム理論の指導
- **ベータテスター** - 貴重なフィードバック

## 📞 サポート・連絡先　　　

- **バグ報告**: [GitHub Issues](https://github.com/chartaicho1234/castanets-master/issues)
- **機能要望**: [GitHub Discussions](https://github.com/chartaicho1234/castanets-master/discussions)
- **一般的な質問**: README.mdのトラブルシューティングを参照

---

<div align="center">

**🎵 BPM 180の世界で、あなたのリズム感を極限まで鍛え上げましょう！ 🎵**

[🚀 今すぐプレイ](https://chartaicho1234.github.io/castanets-master/) | [📖 ドキュメント](docs/README.md) | [🐛 バグ報告](https://github.com/chartaicho1234/castanets-master/issues)

</div>
